(function(e){function t(t){for(var a,r,i=t[0],u=t[1],c=t[2],l=0,d=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},o={app:0},s=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-09e9ec32":"ceb5e6ac","chunk-0a798d1a":"01fc2c0a","chunk-2b5773ca":"f9bccd25","chunk-2d21e30b":"97f4a355","chunk-87c66e80":"0078ece7"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-09e9ec32":1,"chunk-0a798d1a":1,"chunk-2b5773ca":1,"chunk-87c66e80":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-09e9ec32":"49d956a2","chunk-0a798d1a":"0ef40b30","chunk-2b5773ca":"7e86771f","chunk-2d21e30b":"31d6cfe0","chunk-87c66e80":"e8f63a1a"}[e]+".css",o=u.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===a||l===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],l=c.getAttribute("data-href");if(l===a||l===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[e],m.parentNode.removeChild(m),n(s)},m.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var m=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0836":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[n("router-link",{attrs:{to:"/index"},on:{click:function(t){return e.selectMenu({name:"Index",title:"首页"})}}},[n("el-menu-item",{attrs:{index:"Index"}},[[n("i",{staticClass:"el-icon-s-home"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]],2)],1),e._l(e.menuList,(function(t){return n("el-submenu",{key:t.menuId,attrs:{"default-active":"Index",index:t.menuName}},[n("template",{slot:"title"},[n("i",{class:t.icon}),e._v(" "),n("span",[e._v(e._s(t.menuName))])]),n("el-menu-item-group",e._l(t.children,(function(t){return n("router-link",{key:t.name,attrs:{to:t.path}},[n("el-menu-item",{attrs:{index:t.menuName}},[n("template",{slot:"title"},[n("i",{class:t.icon}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.menuName))])])],2)],1)})),1)],2)}))],2)},r=[],o={name:"SideMenu",data:function(){return{}},computed:{menuList:{get:function(){return this.$store.state.menus.menuList}}},methods:{selectMenu:function(e){this.$store.commit("addTab",e)}}},s=o,i=(n("36d4"),n("2877")),u=Object(i["a"])(s,a,r,!1,null,"a484123c",null);t["default"]=u.exports},"16ae":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":e.removeTab,"tab-click":e.clickTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(e){return n("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}})})),1)},r=[],o=(n("159b"),n("b0c0"),n("4de4"),{name:"Tabs",data:function(){return{}},computed:{editableTabs:{get:function(){return this.$store.state.menus.editableTabs},set:function(e){this.$store.state.menus.editableTabs=e}},editableTabsValue:{get:function(){return this.$store.state.menus.editableTabsValue},set:function(e){this.$store.state.menus.edit=e}}},methods:{removeTab:function(e){var t=this.editableTabs,n=this.editableTabsValue;"Index"!==n&&(n===e&&t.forEach((function(a,r){if(a.name===e){var o=t[r+1]||t[r-1];o&&(n=o.name)}})),this.editableTabsValue=n,this.editableTabs=t.filter((function(t){return t.name!==e})),this.$router.push({name:n}))},clickTab:function(e){this.$router.push({name:e.name})}}}),s=o,i=n("2877"),u=Object(i["a"])(s,a,r,!1,null,"1138ce23",null);t["default"]=u.exports},"1a5d":function(e,t,n){var a={"./Home.vue":["bb51"],"./Index.vue":["d504","chunk-2d21e30b"],"./Login.vue":["a55b"],"./UserCenter.vue":["6494","chunk-2b5773ca"],"./inc/SideMenu.vue":["0836"],"./inc/Tabs.vue":["16ae"],"./sys/Menu.vue":["e3c9","chunk-87c66e80"],"./sys/Role.vue":["7ad5","chunk-0a798d1a"],"./sys/User.vue":["45d1","chunk-09e9ec32"]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id="1a5d",e.exports=r},"36d4":function(e,t,n){"use strict";n("4d3b")},"4d3b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s=(n("b0c0"),{name:"App",watch:{$route:function(e,t){if(console.log("to"),console.log(e),"/login"!=e.path){var n={name:e.name,title:e.meta.title};this.$store.commit("addTab",n)}}}}),i=s,u=(n("034f"),n("2877")),c=Object(u["a"])(i,r,o,!1,null,null,null),l=c.exports,d=(n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("8c4f")),m=n("a55b"),f=n("bb51"),h=n("bc3a"),p=n.n(h),b=n("5c96"),g=n.n(b);p.a.defaults.baseURL="http://127.0.0.1:8080";var v=p.a.create({timeout:5e3,headers:{"Content-Type":"application/json; charset=utf-8"}});v.interceptors.request.use((function(e){return e.headers["Authorization"]=localStorage.getItem("token"),e})),v.interceptors.response.use((function(e){var t=e.data;return console.log(t),200===t.code?e:(g.a.Message.error(t.message?t.message:"系统异常"),Promise.reject(e.data.message))}),(function(e){return console.log(e),e.response.data&&(e.message=e.response.data.message),401===e.response.status&&router.push("/"),g.a.Message.error(e.message,{duration:3e3}),Promise.reject(e)}));var k=v,y=n("2f62");n("c740");a["default"].use(y["a"]);var x={state:{menuList:[],permList:[],hasRoutes:!1,editableTabsValue:"Index",editableTabs:[{title:"首页",name:"Index"}]},mutations:{setMenuList:function(e,t){e.menuList=t},setPermList:function(e,t){e.permList=t},changeRouteStatus:function(e,t){e.hasRoutes=t},addTab:function(e,t){var n=e.editableTabs.findIndex((function(e){return e.name===t.name}));-1===n&&e.editableTabs.push({title:t.title,name:t.name}),e.editableTabsValue=t.name},resetState:function(e){e.menuList=[],e.permList=[],e.hasRoutes=!1,e.editableTabsValue="Index",e.editableTabs=[{title:"首页",name:"Index"}]}},actions:{}};a["default"].use(y["a"]);var w=new y["a"].Store({state:{token:""},mutations:{SET_TOKEN:function(e,t){e.token=t,console.log(t),localStorage.setItem("token",t)}},actions:{},modules:{menus:x}});a["default"].use(d["a"]);var T=[{path:"/login",name:"Login",component:m["default"]},{path:"/",name:"Home",component:f["default"],children:[{path:"/index",name:"Index",meta:{title:"首页"},component:function(){return n.e("chunk-2d21e30b").then(n.bind(null,"d504"))}},{path:"/userCenter",name:"UserCenter",meta:{title:"个人中心"},component:function(){return n.e("chunk-2b5773ca").then(n.bind(null,"6494"))}}]}],_=new d["a"]({mode:"history",base:"/",routes:T});_.beforeEach((function(e,t,n){var a=w.state.menus.hasRoutes,r=localStorage.getItem("token");"/login"==e.path?(console.log("login!!!!!!"),n()):r?r&&!a&&k.get("/sys/menu/nav",{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){console.log(e.data.data),w.commit("setMenuList",e.data.data.nav),w.commit("setPermList",e.data.data.authoritys);var t=_.options.routes;e.data.data.nav.forEach((function(e){e.children&&e.children.forEach((function(e){var n=S(e);n&&t[1].children.push(n)}))})),console.log("newRoutes"),console.log(t),_.addRoutes(t),a=!0,w.commit("changeRouteStatus",a)})):(console.log("token不存在"),n({path:"/login"})),n()}));var S=function(e){if(console.log("正在添加menu--》"),console.log(e),!e.component)return null;var t={name:e.menuName,path:e.path,meta:{icon:e.icon,title:e.menuName},component:function(){return n("1a5d")("./"+e.component+".vue")}};return t},$=_;n("0fae");a["default"].config.productionTip=!1,a["default"].use(g.a),a["default"].prototype.$axios=k,new a["default"]({router:$,store:w,render:function(e){return e(l)}}).$mount("#app")},"5ced":function(e,t,n){},"70a3":function(e,t,n){},"85ec":function(e,t,n){},9692:function(e,t,n){"use strict";n("70a3")},a55b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"80px"}},[n("h3",{staticClass:"title",staticStyle:{height:"40px"}},[e._v("Authority")]),n("el-form-item",{attrs:{label:"账号",prop:"username"}},[n("el-input",{staticStyle:{width:"230px"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticStyle:{width:"230px"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),n("el-form-item",{attrs:{label:"验证码",prop:"code"}},[n("el-input",{staticStyle:{width:"140px",float:"left"},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",t)},expression:"loginForm.captcha"}}),n("el-image",{staticClass:"captchaImg",attrs:{src:e.captchaImg},on:{click:e.getCaptcha}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v("登录 ")]),n("el-button",{on:{click:function(t){return e.resetForm("loginForm")}}},[e._v("重置")])],1)],1),e._m(0)],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loginFooter"},[n("span",[e._v("Copyright © 2021 qinweizhao All Rights Reserved.")])])}],o={name:"Login",data:function(){return{loginForm:{username:"admin",password:"123456",captcha:""},captchaImg:"",rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:5,max:5,message:"长度为5个字符",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.getCaptcha(),console.log("error submit!!"),!1;t.$axios.post("/login",t.loginForm).then((function(e){var n=e.data.data;t.$store.commit("SET_TOKEN",n),t.$router.push("/")})).catch((function(){t.getCaptcha(),console.log("error submit!!!")}))}))},resetForm:function(e){this.$refs[e].resetFields()},getCaptcha:function(){var e=this;this.$axios.get("sys/user/captcha").then((function(t){console.log(t),e.captchaImg=t.data.data}))}},created:function(){this.getCaptcha()}},s=o,i=(n("9692"),n("2877")),u=Object(i["a"])(s,a,r,!1,null,"02516c88",null);t["default"]=u.exports},bb51:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("SideMenu")],1),n("el-container",[n("el-header",{staticStyle:{height:"55px"}},[n("Strong",[e._v("Authority")]),n("div",{staticClass:"header-avatar block"},[n("el-avatar",{staticClass:"el-avatar",attrs:{src:e.userInfo.avatar,size:"medium"}}),n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.userInfo.username)+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{underline:!1}},[n("router-link",{attrs:{to:{name:"UserCenter"}}},[e._v("个人中心")])],1),n("el-dropdown-item",{nativeOn:{click:function(t){return e.logout.apply(null,arguments)}}},[e._v("退出")])],1)],1)],1)],1),n("el-container",[n("el-main",[n("Tabs"),n("div",{staticStyle:{margin:"0 15px"}},[n("router-view")],1)],1)],1)],1)],1)},r=[],o=n("0836"),s=n("16ae"),i={name:"Home",data:function(){return{userInfo:{id:"",username:"",avatar:""}}},components:{SideMenu:o["default"],Tabs:s["default"]},created:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;this.$axios.get("/sys/user/info").then((function(t){console.log("userInfo:"+t.data.data),e.userInfo=t.data.data}))},logout:function(){var e=this;this.$axios.post("/logout").then((function(t){localStorage.clear(),sessionStorage.clear(),e.$store.commit("resetState"),e.$router.push("/login")}))}}},u=i,c=(n("cccb"),n("2877")),l=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=l.exports},cccb:function(e,t,n){"use strict";n("5ced")}});
//# sourceMappingURL=app.1bfa2544.js.map